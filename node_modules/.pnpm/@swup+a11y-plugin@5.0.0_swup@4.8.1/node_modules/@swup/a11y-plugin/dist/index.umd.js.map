{"version":3,"file":"index.umd.js","sources":["../node_modules/@swup/plugin/dist/index.modern.js","../node_modules/focus-options-polyfill/index.js","../src/util.ts","../src/announcements.ts","../src/focus.ts","../src/index.ts"],"sourcesContent":["function r(){return r=Object.assign?Object.assign.bind():function(r){for(var n=1;n<arguments.length;n++){var e=arguments[n];for(var t in e)Object.prototype.hasOwnProperty.call(e,t)&&(r[t]=e[t])}return r},r.apply(this,arguments)}const n=r=>String(r).split(\".\").map(r=>String(parseInt(r||\"0\",10))).concat([\"0\",\"0\"]).slice(0,3).join(\".\");class e{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(r=>r()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error(\"You must define a name of plugin when creating a class.\")}_afterUnmount(){}_checkRequirements(){return\"object\"!=typeof this.requires||Object.entries(this.requires).forEach(([r,e])=>{if(!function(r,e,t){const s=function(r,n){var e;if(\"swup\"===r)return null!=(e=n.version)?e:\"\";{var t;const e=n.findPlugin(r);return null!=(t=null==e?void 0:e.version)?t:\"\"}}(r,t);return!!s&&((r,e)=>e.every(e=>{const[,t,s]=e.match(/^([\\D]+)?(.*)$/)||[];var o,i;return((r,n)=>{const e={\"\":r=>0===r,\">\":r=>r>0,\">=\":r=>r>=0,\"<\":r=>r<0,\"<=\":r=>r<=0};return(e[n]||e[\"\"])(r)})((i=s,o=n(o=r),i=n(i),o.localeCompare(i,void 0,{numeric:!0})),t||\">=\")}))(s,e)}(r,e=Array.isArray(e)?e:[e],this.swup)){const n=`${r} ${e.join(\", \")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${n}`)}}),!0}on(r,n,e={}){var t;n=!(t=n).name.startsWith(\"bound \")||t.hasOwnProperty(\"prototype\")?n.bind(this):n;const s=this.swup.hooks.on(r,n,e);return this.handlersToUnregister.push(s),s}once(n,e,t={}){return this.on(n,e,r({},t,{once:!0}))}before(n,e,t={}){return this.on(n,e,r({},t,{before:!0}))}replace(n,e,t={}){return this.on(n,e,r({},t,{replace:!0}))}off(r,n){return this.swup.hooks.off(r,n)}}export{e as default};\n//# sourceMappingURL=index.modern.js.map\n","// focus - focusOptions - preventScroll polyfill\n(function() {\n  if (\n    typeof window === \"undefined\" ||\n    typeof document === \"undefined\" ||\n    typeof HTMLElement === \"undefined\"\n  ) {\n    return;\n  }\n\n  var supportsPreventScrollOption = false;\n  try {\n    var focusElem = document.createElement(\"div\");\n    focusElem.addEventListener(\n      \"focus\",\n      function(event) {\n        event.preventDefault();\n        event.stopPropagation();\n      },\n      true\n    );\n    focusElem.focus(\n      Object.defineProperty({}, \"preventScroll\", {\n        get: function() {\n          // Edge v18 gives a false positive for supporting inputs\n          if (\n            navigator &&\n            typeof navigator.userAgent !== 'undefined' &&\n            navigator.userAgent &&\n            navigator.userAgent.match(/Edge\\/1[7-8]/)) {\n              return supportsPreventScrollOption = false\n          }\n\n          supportsPreventScrollOption = true;\n        }\n      })\n    );\n  } catch (e) {}\n\n  if (\n    HTMLElement.prototype.nativeFocus === undefined &&\n    !supportsPreventScrollOption\n  ) {\n    HTMLElement.prototype.nativeFocus = HTMLElement.prototype.focus;\n\n    var calcScrollableElements = function(element) {\n      var parent = element.parentNode;\n      var scrollableElements = [];\n      var rootScrollingElement =\n        document.scrollingElement || document.documentElement;\n\n      while (parent && parent !== rootScrollingElement) {\n        if (\n          parent.offsetHeight < parent.scrollHeight ||\n          parent.offsetWidth < parent.scrollWidth\n        ) {\n          scrollableElements.push([\n            parent,\n            parent.scrollTop,\n            parent.scrollLeft\n          ]);\n        }\n        parent = parent.parentNode;\n      }\n      parent = rootScrollingElement;\n      scrollableElements.push([parent, parent.scrollTop, parent.scrollLeft]);\n\n      return scrollableElements;\n    };\n\n    var restoreScrollPosition = function(scrollableElements) {\n      for (var i = 0; i < scrollableElements.length; i++) {\n        scrollableElements[i][0].scrollTop = scrollableElements[i][1];\n        scrollableElements[i][0].scrollLeft = scrollableElements[i][2];\n      }\n      scrollableElements = [];\n    };\n\n    var patchedFocus = function(args) {\n      if (args && args.preventScroll) {\n        var evScrollableElements = calcScrollableElements(this);\n        if (typeof setTimeout === 'function') {\n          var thisElem = this;\n          setTimeout(function () {\n            thisElem.nativeFocus();\n            restoreScrollPosition(evScrollableElements);\n          }, 0);\n        } else {\n          this.nativeFocus();\n          restoreScrollPosition(evScrollableElements);\n        }\n      }\n      else {\n        this.nativeFocus();\n      }\n    };\n\n    HTMLElement.prototype.focus = patchedFocus;\n  }\n})();\n","export function createElement(html: string): HTMLElement {\n\tconst template = document.createElement('template');\n\ttemplate.innerHTML = html;\n\treturn template.content.children[0] as HTMLElement;\n}\n\nexport function parseTemplate(str: string, replacements: Record<string, string>): string {\n\treturn Object.keys(replacements).reduce((str, key) => {\n\t\treturn str.replace(`{${key}}`, replacements[key] || '');\n\t}, str || '');\n}\n\nexport function prefersReducedMotion(): boolean {\n\treturn window.matchMedia('(prefers-reduced-motion: reduce)').matches;\n}\n","import { Location } from 'swup';\nimport { AnnouncementTranslations, Options } from './index.js';\nimport { createElement, parseTemplate } from './util.js';\n\nexport class Announcer {\n\tid: string = 'swup-announcer';\n\tstyle: string = `position:absolute;top:0;left:0;clip:rect(0 0 0 0);clip-path:inset(50%);overflow:hidden;white-space:nowrap;word-wrap:normal;width:1px;height:1px;`;\n\tregion: HTMLElement;\n\n\tconstructor() {\n\t\tthis.region = this.getRegion() ?? this.createRegion();\n\t}\n\n\tgetRegion(): HTMLElement | null {\n\t\treturn document.getElementById(this.id);\n\t}\n\n\tcreateRegion(): HTMLElement {\n\t\tconst liveRegion = createElement(\n\t\t\t`<p aria-live=\"assertive\" aria-atomic=\"true\" id=\"${this.id}\" style=\"${this.style}\"></p>`\n\t\t);\n\t\tdocument.body.appendChild(liveRegion);\n\t\treturn liveRegion;\n\t}\n\n\tannounce(message: string, delay: number = 0): Promise<void> {\n\t\treturn new Promise((resolve) => {\n\t\t\tsetTimeout(() => {\n\t\t\t\t// Make each message unique to allow reading identical page titles twice in a row\n\t\t\t\tif (this.region.textContent === message) {\n\t\t\t\t\tmessage = `${message}.`;\n\t\t\t\t}\n\t\t\t\t// Clear before announcing\n\t\t\t\tthis.region.textContent = '';\n\t\t\t\tthis.region.textContent = message;\n\n\t\t\t\tresolve();\n\t\t\t}, delay);\n\t\t});\n\t}\n}\n\nexport type PageAnnouncementOptions = Pick<Options, 'headingSelector' | 'announcements'>;\n\nexport function getPageAnnouncement({\n\theadingSelector = 'h1',\n\tannouncements = {}\n}: PageAnnouncementOptions): string | undefined {\n\tconst lang = document.documentElement.lang || '*';\n\tconst { href, url, pathname: path } = Location.fromUrl(window.location.href);\n\n\tconst templates =\n\t\t(announcements as AnnouncementTranslations)[lang] ??\n\t\t(announcements as AnnouncementTranslations)['*'] ??\n\t\tannouncements;\n\tif (typeof templates !== 'object') return;\n\n\t// Look for first heading on page\n\tconst headingEl = document.querySelector(headingSelector);\n\tif (!headingEl) {\n\t\tconsole.warn(`SwupA11yPlugin: No main heading (${headingSelector}) found on new page`);\n\t}\n\n\t// Get page heading from aria attribute or text content\n\tconst heading = headingEl?.getAttribute('aria-label') || headingEl?.textContent;\n\n\t// Fall back to document title, then url if no title was found\n\tconst title = heading || document.title || parseTemplate(templates.url, { href, url, path });\n\n\t// Replace {variables} in template\n\treturn parseTemplate(templates.visit, { title, href, url, path });\n}\n","export function focusElement(elementOrSelector: string | HTMLElement) {\n\tlet el: HTMLElement | null;\n\tif (typeof elementOrSelector === 'string') {\n\t\tel = document.querySelector<HTMLElement>(elementOrSelector);\n\t} else {\n\t\tel = elementOrSelector;\n\t}\n\n\tif (!(el instanceof HTMLElement)) return;\n\n\t// Apply a tabindex attribute to allow focusing non-focusable elements\n\tconst tabindex = el.getAttribute('tabindex');\n\tel.setAttribute('tabindex', '-1');\n\tel.focus({ preventScroll: true });\n\tif (tabindex !== null) {\n\t\tel.setAttribute('tabindex', tabindex);\n\t} else {\n\t\t// Removing the tabindex will reset screen reader position, so we'll keep it\n\t\t// el.removeAttribute('tabindex');\n\t}\n}\n\nexport function focusAutofocusElement(): boolean {\n\tconst autofocusEl = getAutofocusElement();\n\tif (!autofocusEl) return false;\n\n\tif (autofocusEl !== document.activeElement) {\n\t\t// Only focus if not already focused\n\t\t// No preventScroll flag here, as probably intended with autofocus\n\t\tautofocusEl.focus();\n\t}\n\treturn true;\n}\n\nexport function getAutofocusElement(): HTMLElement | undefined {\n\tconst focusEl = document.querySelector<HTMLElement>('body [autofocus]');\n\tif (focusEl && !focusEl.closest('[inert], [aria-disabled], [aria-hidden=\"true\"]')) {\n\t\treturn focusEl;\n\t}\n}\n","import { HookHandler, Visit } from 'swup';\nimport Plugin from '@swup/plugin';\n\nimport 'focus-options-polyfill';\n\nimport { Announcer, getPageAnnouncement } from './announcements.js';\nimport { focusAutofocusElement, focusElement } from './focus.js';\nimport { prefersReducedMotion } from './util.js';\n\nexport interface VisitA11y {\n\t/** How to announce the new content after it inserted */\n\tannounce: string | false | undefined;\n\t/** The element to focus after the content is replaced */\n\tfocus: string | false;\n}\n\ndeclare module 'swup' {\n\texport interface Visit {\n\t\t/** Accessibility settings for this visit */\n\t\ta11y: VisitA11y;\n\t}\n\texport interface HookDefinitions {\n\t\t'content:announce': undefined;\n\t\t'content:focus': undefined;\n\t}\n\texport interface Swup {\n\t\t/**\n\t\t * Announce something programmatically\n\t\t */\n\t\tannounce?: SwupA11yPlugin['announce'];\n\t}\n}\n\n/** Templates for announcements of the new page content. */\nexport type Announcements = {\n\t/** How to announce the new page. */\n\tvisit: string;\n\t/** How to read a page url. Used as fallback if no heading was found. */\n\turl: string;\n};\n\n/** Translations of announcements, keyed by language. */\nexport type AnnouncementTranslations = {\n\t[lang: string]: Announcements;\n};\n\nexport type Options = {\n\t/** The selector for finding headings inside the main content area. */\n\theadingSelector: string;\n\t/** Whether to skip animations for users that prefer reduced motion. */\n\trespectReducedMotion: boolean;\n\t/** How to announce the new page title and url. */\n\tannouncements: Announcements | AnnouncementTranslations;\n\t/** Whether to focus elements with an [autofocus] attribute after navigation. */\n\tautofocus: boolean;\n};\n\nexport default class SwupA11yPlugin extends Plugin {\n\tname = 'SwupA11yPlugin';\n\n\trequires = { swup: '>=4' };\n\n\tdefaults: Options = {\n\t\theadingSelector: 'h1',\n\t\trespectReducedMotion: true,\n\t\tautofocus: false,\n\t\tannouncements: {\n\t\t\tvisit: 'Navigated to: {title}',\n\t\t\turl: 'New page at {url}'\n\t\t}\n\t};\n\n\toptions: Options;\n\n\t/**\n\t * The announcer instance for reading new page content.\n\t */\n\tannouncer: Announcer;\n\n\t/**\n\t * The delay before announcing new page content.\n\t * Why 100ms? see research at https://github.com/swup/a11y-plugin/pull/50\n\t */\n\tannouncementDelay: number = 100;\n\n\t/**\n\t * The selector for the main content area of the page, to focus after navigation.\n\t */\n\trootSelector: string = 'body';\n\n\tconstructor(options: Partial<Options> = {}) {\n\t\tsuper();\n\n\t\t// Merge default options with user defined options\n\t\tthis.options = { ...this.defaults, ...options };\n\n\t\t// Create announcer instance for announcing new page content\n\t\tthis.announcer = new Announcer();\n\t}\n\n\tmount() {\n\t\t// Prepare new hooks\n\t\tthis.swup.hooks.create('content:announce');\n\t\tthis.swup.hooks.create('content:focus');\n\n\t\t// Prepare visit by adding a11y settings to visit object\n\t\tthis.before('visit:start', this.prepareVisit);\n\n\t\t// Mark page as busy during transitions\n\t\tthis.on('visit:start', this.markAsBusy);\n\t\tthis.on('visit:end', this.unmarkAsBusy);\n\n\t\t// Focus new page content after visit completes\n\t\tthis.on('visit:end', this.focusContent);\n\n\t\t// Announce new page title after visit completes\n\t\tthis.on('visit:end', this.announceContent);\n\n\t\t// Move focus start point when clicking on-page anchors\n\t\tthis.on('scroll:anchor', this.handleAnchorScroll);\n\n\t\t// Disable transition and scroll animations if user prefers reduced motion\n\t\tthis.before('visit:start', this.disableAnimations);\n\t\tthis.before('link:self', this.disableAnimations);\n\t\tthis.before('link:anchor', this.disableAnimations);\n\n\t\t// Announce something programmatically\n\t\tthis.swup.announce = this.announce.bind(this);\n\t}\n\n\tunmount() {\n\t\tthis.swup.announce = undefined;\n\t}\n\n\tasync announce(message: string): Promise<void> {\n\t\tawait this.announcer.announce(message);\n\t}\n\n\tmarkAsBusy() {\n\t\tdocument.documentElement.setAttribute('aria-busy', 'true');\n\t}\n\n\tunmarkAsBusy() {\n\t\tdocument.documentElement.removeAttribute('aria-busy');\n\t}\n\n\tprepareVisit(visit: Visit) {\n\t\tvisit.a11y = {\n\t\t\tannounce: undefined,\n\t\t\tfocus: this.rootSelector\n\t\t};\n\t}\n\n\tannounceContent(visit: Visit) {\n\t\tthis.swup.hooks.callSync('content:announce', visit, undefined, (visit) => {\n\t\t\t// Allow customizing announcement before this hook\n\t\t\tif (typeof visit.a11y.announce === 'undefined') {\n\t\t\t\tvisit.a11y.announce = this.getPageAnnouncement();\n\t\t\t}\n\n\t\t\tif (!visit.a11y.announce) return;\n\n\t\t\tthis.announcer.announce(visit.a11y.announce, this.announcementDelay);\n\t\t});\n\t}\n\n\tfocusContent(visit: Visit) {\n\t\tthis.swup.hooks.callSync('content:focus', visit, undefined, (visit) => {\n\t\t\tif (!visit.a11y.focus) return;\n\n\t\t\t// Found and focused [autofocus] element? Return early\n\t\t\tif (this.options.autofocus && focusAutofocusElement() === true) return;\n\n\t\t\t// Otherwise, find and focus actual content container\n\t\t\tfocusElement(visit.a11y.focus);\n\t\t});\n\t}\n\n\thandleAnchorScroll: HookHandler<'scroll:anchor'> = (visit, { hash }) => {\n\t\tconst anchor = this.swup.getAnchorElement(hash);\n\t\tif (anchor instanceof HTMLElement) {\n\t\t\tfocusElement(anchor);\n\t\t}\n\t};\n\n\tgetPageAnnouncement(): string | undefined {\n\t\tconst { headingSelector, announcements } = this.options;\n\t\treturn getPageAnnouncement({ headingSelector, announcements });\n\t}\n\n\tdisableAnimations(visit: Visit) {\n\t\tif (this.options.respectReducedMotion && prefersReducedMotion()) {\n\t\t\tvisit.animation.animate = false;\n\t\t\t// @ts-expect-error: animate is undefined unless Scroll Plugin installed\n\t\t\tvisit.scroll.animate = false;\n\t\t}\n\t}\n}\n"],"names":["n","r","String","split","map","parseInt","concat","slice","join","e","every","t","s","match","o","i","localeCompare","numeric","window","document","HTMLElement","supportsPreventScrollOption","focusElem","createElement","addEventListener","event","preventDefault","stopPropagation","focus","Object","defineProperty","get","navigator","userAgent","undefined","prototype","nativeFocus","restoreScrollPosition","scrollableElements","length","scrollTop","scrollLeft","args","preventScroll","evScrollableElements","element","parent","parentNode","rootScrollingElement","scrollingElement","documentElement","offsetHeight","scrollHeight","offsetWidth","scrollWidth","push","calcScrollableElements","this","setTimeout","thisElem","parseTemplate","str","replacements","keys","reduce","key","replace","Announcer","constructor","id","style","region","getRegion","createRegion","getElementById","liveRegion","html","template","innerHTML","content","children","body","appendChild","announce","message","delay","Promise","resolve","textContent","focusElement","elementOrSelector","el","querySelector","tabindex","getAttribute","setAttribute","Plugin","options","super","name","requires","swup","defaults","headingSelector","respectReducedMotion","autofocus","announcements","visit","url","announcer","announcementDelay","rootSelector","handleAnchorScroll","_ref","hash","anchor","getAnchorElement","mount","hooks","create","before","prepareVisit","on","markAsBusy","unmarkAsBusy","focusContent","announceContent","disableAnimations","bind","unmount","then","reject","removeAttribute","a11y","callSync","getPageAnnouncement","autofocusEl","focusEl","closest","getAutofocusElement","activeElement","focusAutofocusElement","lang","href","pathname","path","Location","fromUrl","location","templates","headingEl","console","warn","title","matchMedia","matches","animation","animate","scroll"],"mappings":"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"}