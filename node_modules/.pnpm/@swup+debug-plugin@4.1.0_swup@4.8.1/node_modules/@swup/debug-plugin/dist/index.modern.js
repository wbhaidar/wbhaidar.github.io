import o from"@swup/plugin";import{query as s,queryAll as t}from"swup";function i(){return i=Object.assign?Object.assign.bind():function(o){for(var s=1;s<arguments.length;s++){var t=arguments[s];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(o[i]=t[i])}return o},i.apply(this,arguments)}class n extends o{constructor(o={}){super(),this.name="SwupDebugPlugin",this.requires={swup:">=4"},this.defaults={globalInstance:!1},this.options=void 0,this.originalSwupLog=void 0,this.originalSwupHookCall=void 0,this.originalSwupHookCallSync=void 0,this.callHook=(o,s,...t)=>(this.logHook(o,s),this.originalSwupHookCall(o,s,...t)),this.callHookSync=(o,s,...t)=>(this.logHook(o,s),this.originalSwupHookCallSync(o,s,...t)),this.options=i({},this.defaults,o)}mount(){this.setLogImplementation(),this.setGlobalInstance(),this.proxyHooksThroughConsole(),this.checkDocumentTitle(),this.checkContainers(),this.checkAnimationSelector()}unmount(){super.unmount(),this.restoreLogImplementation(),this.restoreHooksImplementation(),this.unsetGlobalInstance()}setLogImplementation(){this.originalSwupLog=this.swup.log,this.swup.log=this.log}restoreLogImplementation(){this.swup.log=this.originalSwupLog}proxyHooksThroughConsole(){this.originalSwupHookCall=this.swup.hooks.call.bind(this.swup.hooks),this.originalSwupHookCallSync=this.swup.hooks.callSync.bind(this.swup.hooks),this.swup.hooks.call=this.callHook.bind(this),this.swup.hooks.callSync=this.callHookSync.bind(this)}restoreHooksImplementation(){this.swup.hooks.call=this.originalSwupHookCall,this.swup.hooks.callSync=this.originalSwupHookCallSync}setGlobalInstance(){this.options.globalInstance&&(window.swup=this.swup)}unsetGlobalInstance(){this.options.globalInstance&&(window.swup=void 0)}checkDocumentTitle(){s("title")||this.error("Document is missing a title tag. It is required on every page.")}checkContainers(){for(const o of this.swup.options.containers){const s=t(o);s.length||this.error(`Container \`${o}\` is missing on the page.`),s.length>1&&this.error(`Container \`${o}\` matches multiple elements.`),s.some(o=>!o.matches("body *"))&&this.error(`Container \`${o}\` is not supported. It must be a child of the body tag.`)}}checkAnimationSelector(){const{animationSelector:o}=this.swup.options;o&&(this.swup.options.containers.map(o=>s(o)).filter(s=>null==s?void 0:s.matches(o)).length||this.warn(`No container matches the animation selector \`${o}\`.`))}logHook(o,s){console.groupCollapsed("%cswup:%c"+o,"color: #343434","color: #009ACD"),console.log(s),console.groupEnd()}log(o,s){if(s){console.groupCollapsed(o);for(let o in s)console.log(s[o]);console.groupEnd()}else console.log(o+"%c","color: #009ACD")}warn(o){console.warn(`[swup debug plugin] ${o}`)}error(o){console.error(`[swup debug plugin] ${o}`)}}export{n as default};
//# sourceMappingURL=index.modern.js.map
