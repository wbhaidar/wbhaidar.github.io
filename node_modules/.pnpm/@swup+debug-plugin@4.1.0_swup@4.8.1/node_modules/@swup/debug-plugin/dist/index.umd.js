!function(o,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(o||self).SwupDebugPlugin=t()}(this,function(){function o(){return o=Object.assign?Object.assign.bind():function(o){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(o[s]=n[s])}return o},o.apply(this,arguments)}const t=o=>String(o).split(".").map(o=>String(parseInt(o||"0",10))).concat(["0","0"]).slice(0,3).join(".");class n{constructor(){this.isSwupPlugin=!0,this.swup=void 0,this.version=void 0,this.requires={},this.handlersToUnregister=[]}mount(){}unmount(){this.handlersToUnregister.forEach(o=>o()),this.handlersToUnregister=[]}_beforeMount(){if(!this.name)throw new Error("You must define a name of plugin when creating a class.")}_afterUnmount(){}_checkRequirements(){return"object"!=typeof this.requires||Object.entries(this.requires).forEach(([o,n])=>{if(!function(o,n,s){const e=function(o,t){var n;if("swup"===o)return null!=(n=t.version)?n:"";{var s;const n=t.findPlugin(o);return null!=(s=null==n?void 0:n.version)?s:""}}(o,s);return!!e&&((o,n)=>n.every(n=>{const[,s,e]=n.match(/^([\D]+)?(.*)$/)||[];var i,r;return((o,t)=>{const n={"":o=>0===o,">":o=>o>0,">=":o=>o>=0,"<":o=>o<0,"<=":o=>o<=0};return(n[t]||n[""])(o)})((r=e,i=t(i=o),r=t(r),i.localeCompare(r,void 0,{numeric:!0})),s||">=")}))(e,n)}(o,n=Array.isArray(n)?n:[n],this.swup)){const t=`${o} ${n.join(", ")}`;throw new Error(`Plugin version mismatch: ${this.name} requires ${t}`)}}),!0}on(o,t,n={}){var s;t=!(s=t).name.startsWith("bound ")||s.hasOwnProperty("prototype")?t.bind(this):t;const e=this.swup.hooks.on(o,t,n);return this.handlersToUnregister.push(e),e}once(t,n,s={}){return this.on(t,n,o({},s,{once:!0}))}before(t,n,s={}){return this.on(t,n,o({},s,{before:!0}))}replace(t,n,s={}){return this.on(t,n,o({},s,{replace:!0}))}off(o,t){return this.swup.hooks.off(o,t)}}const s=(o,t=document)=>t.querySelector(o),e=(o,t=document)=>Array.from(t.querySelectorAll(o));return class extends n{constructor(o){void 0===o&&(o={}),super(),this.name="SwupDebugPlugin",this.requires={swup:">=4"},this.defaults={globalInstance:!1},this.options=void 0,this.originalSwupLog=void 0,this.originalSwupHookCall=void 0,this.originalSwupHookCallSync=void 0,this.callHook=(()=>{var o=this;return function(t,n){return o.logHook(t,n),o.originalSwupHookCall(t,n,...[].slice.call(arguments,2))}})(),this.callHookSync=(()=>{var o=this;return function(t,n){return o.logHook(t,n),o.originalSwupHookCallSync(t,n,...[].slice.call(arguments,2))}})(),this.options={...this.defaults,...o}}mount(){this.setLogImplementation(),this.setGlobalInstance(),this.proxyHooksThroughConsole(),this.checkDocumentTitle(),this.checkContainers(),this.checkAnimationSelector()}unmount(){super.unmount(),this.restoreLogImplementation(),this.restoreHooksImplementation(),this.unsetGlobalInstance()}setLogImplementation(){this.originalSwupLog=this.swup.log,this.swup.log=this.log}restoreLogImplementation(){this.swup.log=this.originalSwupLog}proxyHooksThroughConsole(){this.originalSwupHookCall=this.swup.hooks.call.bind(this.swup.hooks),this.originalSwupHookCallSync=this.swup.hooks.callSync.bind(this.swup.hooks),this.swup.hooks.call=this.callHook.bind(this),this.swup.hooks.callSync=this.callHookSync.bind(this)}restoreHooksImplementation(){this.swup.hooks.call=this.originalSwupHookCall,this.swup.hooks.callSync=this.originalSwupHookCallSync}setGlobalInstance(){this.options.globalInstance&&(window.swup=this.swup)}unsetGlobalInstance(){this.options.globalInstance&&(window.swup=void 0)}checkDocumentTitle(){s("title")||this.error("Document is missing a title tag. It is required on every page.")}checkContainers(){for(const o of this.swup.options.containers){const t=e(o);t.length||this.error(`Container \`${o}\` is missing on the page.`),t.length>1&&this.error(`Container \`${o}\` matches multiple elements.`),t.some(o=>!o.matches("body *"))&&this.error(`Container \`${o}\` is not supported. It must be a child of the body tag.`)}}checkAnimationSelector(){const{animationSelector:o}=this.swup.options;o&&(this.swup.options.containers.map(o=>s(o)).filter(t=>t?.matches(o)).length||this.warn(`No container matches the animation selector \`${o}\`.`))}logHook(o,t){console.groupCollapsed("%cswup:%c"+o,"color: #343434","color: #009ACD"),console.log(t),console.groupEnd()}log(o,t){if(t){console.groupCollapsed(o);for(let o in t)console.log(t[o]);console.groupEnd()}else console.log(o+"%c","color: #009ACD")}warn(o){console.warn(`[swup debug plugin] ${o}`)}error(o){console.error(`[swup debug plugin] ${o}`)}}});
//# sourceMappingURL=index.umd.js.map
